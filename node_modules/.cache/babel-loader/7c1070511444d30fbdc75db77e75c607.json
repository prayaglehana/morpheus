{"ast":null,"code":"var _jsxFileName = \"C:\\\\WareHouse\\\\PiggyMe\\\\Morpheus\\\\morpheus-master\\\\morpheus_on_git\\\\morpheus\\\\src\\\\App.js\";\nimport React, { Component } from 'react'; // import Main from './Main';\n\nimport Transaction from './Transaction';\nimport Main from './Main';\nimport Web3 from 'web3'; //100000000,\"Piggy\",4,\"PGY\"\n// ropsten token addres  0xaf13a1579a45c0b3888efd6c59161dc17ffefb06\n// factory contrat : 0xfd47fa890cff28a4ad101cb67a21745ee19afcd8\n// import { convertPatternsToTasks } from 'fast-glob/out/managers/tasks';\n\nlet _web3;\n\nvar factory_abi = [{\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"Vold\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"sender\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"receiver\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"realrequiredPrice\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"category\",\n    \"type\": \"string\"\n  }],\n  \"name\": \"createContract\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [],\n  \"name\": \"requestTokens\",\n  \"outputs\": [],\n  \"payable\": true,\n  \"stateMutability\": \"payable\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"constructor\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"name\": \"Vold\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"receiver\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"sender\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"newContractAddress\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"realrequiredPrice\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"category\",\n    \"type\": \"string\"\n  }],\n  \"name\": \"contractCreated\",\n  \"type\": \"event\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"allDeals\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"b\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"string\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"tokenContractAddress\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}];\nvar deal_abi = [{\n  \"constant\": false,\n  \"inputs\": [],\n  \"name\": \"unlockDeal\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [],\n  \"name\": \"unsatisfyDeal\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [],\n  \"name\": \"refundSecurity\",\n  \"outputs\": [],\n  \"payable\": true,\n  \"stateMutability\": \"payable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"Volds\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"addSecurity\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [],\n  \"name\": \"satisfyDeal\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"tokenContractAddress\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [],\n  \"name\": \"lockDeal\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"showStatus\",\n  \"outputs\": [{\n    \"components\": [{\n      \"name\": \"exist\",\n      \"type\": \"bool\"\n    }, {\n      \"name\": \"secSender\",\n      \"type\": \"bool\"\n    }, {\n      \"name\": \"secReceiver\",\n      \"type\": \"bool\"\n    }, {\n      \"name\": \"lock\",\n      \"type\": \"bool\"\n    }, {\n      \"name\": \"satisfied\",\n      \"type\": \"bool\"\n    }, {\n      \"name\": \"rewardClaimed\",\n      \"type\": \"bool\"\n    }],\n    \"name\": \"\",\n    \"type\": \"tuple\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"PiggyBankContractAddress\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"showDetails\",\n  \"outputs\": [{\n    \"components\": [{\n      \"name\": \"receiver\",\n      \"type\": \"address\"\n    }, {\n      \"name\": \"sender\",\n      \"type\": \"address\"\n    }, {\n      \"name\": \"category\",\n      \"type\": \"string\"\n    }, {\n      \"name\": \"description\",\n      \"type\": \"string\"\n    }, {\n      \"name\": \"Vold\",\n      \"type\": \"uint256\"\n    }, {\n      \"name\": \"curBalanceToken\",\n      \"type\": \"uint256\"\n    }, {\n      \"name\": \"realrequiredPrice\",\n      \"type\": \"uint256\"\n    }, {\n      \"name\": \"securityDepositToken\",\n      \"type\": \"uint256\"\n    }, {\n      \"name\": \"realsecurityDepositPrice\",\n      \"type\": \"uint256\"\n    }],\n    \"name\": \"\",\n    \"type\": \"tuple\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"Vnew\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"useBank\",\n    \"type\": \"bool\"\n  }],\n  \"name\": \"claimReward\",\n  \"outputs\": [],\n  \"payable\": true,\n  \"stateMutability\": \"payable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"Vold\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"addmoney\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"newRequiredToken\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"newrealrequiredPrice\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"updaterequiredBalance\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [{\n    \"name\": \"Vold\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"sender\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"receiver\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"realrequiredPrice\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"category\",\n    \"type\": \"string\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"constructor\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"name\": \"Vold\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"receiver\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"sender\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"curBalanceToken\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"eventaddmoney\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"name\": \"Volds\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"sender\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"receiver\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"secSender\",\n    \"type\": \"bool\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"secReceiver\",\n    \"type\": \"bool\"\n  }],\n  \"name\": \"eventSecurityDeposited\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"name\": \"receiver\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"sender\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"lock\",\n    \"type\": \"bool\"\n  }],\n  \"name\": \"eventDealLocked\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"name\": \"receiver\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"sender\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"satisfied\",\n    \"type\": \"bool\"\n  }],\n  \"name\": \"eventDealSatisfied\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"name\": \"receiver\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"sender\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"toGet\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"eventRewardClaimed\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [],\n  \"name\": \"eventupdaterequiredBalance\",\n  \"type\": \"event\"\n}];\nvar factoryContract = undefined,\n    dealContract = undefined; //  else {\n//     console.log('No web3? You should consider trying MetaMask!');\n//     var web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:8545'));\n// }\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      thisAccount: undefined,\n      ca: undefined\n    };\n    this.loadContract = this.loadContract.bind(this);\n  }\n\n  componentWillMount() {\n    if (typeof window.web3 !== 'undefined') {\n      _web3 = new Web3(window.web3.currentProvider);\n      console.log('adx');\n\n      _web3.eth.getAccounts().then(e => {\n        this.setState({\n          thisAccount: e[0]\n        });\n      }); // run the following code only once. Metamask will ask for permission. allow it. then you can comment following code for subsequent ...\n      // window.ethereum.enable().then((account) =>{\n      //     const defaultAccount = account[0]\n      //     _web3.eth.defaultAccount = defaultAccount\n      //     console.log(defaultAccount);\n      // })\n\n\n      factoryContract = new _web3.eth.Contract(factory_abi, '0x603cdc36d6e16696099a72162724ff38419afb57', {\n        from: _web3.eth.defaultAccount\n      });\n    } else console.log('Unable to connect to metamask');\n  }\n\n  loadContract(ca) {\n    console.log('la', ca);\n    this.setState({\n      ca: ca\n    });\n    dealContract = new _web3.eth.Contract(deal_abi, ca, {\n      from: _web3.eth.defaultAccount\n    });\n  }\n\n  render() {\n    if (factoryContract !== undefined && this.state.ca == undefined) {\n      console.log('int ca', this.state.thisAccount);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(Transaction, {\n        factoryContract: factoryContract,\n        thisAccount: this.state.thisAccount,\n        search_by_ca: this.loadContract,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }));\n    } else if (this.state.thisAccount && this.state.ca && dealContract) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Main, {\n        dealContract: dealContract,\n        thisAccount: this.state.thisAccount,\n        ca: this.state.ca,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }));\n    } else return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"https://metamask.io/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Please install metamask first !\"), \" \");\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:\\WareHouse\\PiggyMe\\Morpheus\\morpheus-master\\morpheus_on_git\\morpheus\\src\\App.js"],"names":["React","Component","Transaction","Main","Web3","_web3","factory_abi","deal_abi","factoryContract","undefined","dealContract","App","constructor","props","state","thisAccount","ca","loadContract","bind","componentWillMount","window","web3","currentProvider","console","log","eth","getAccounts","then","e","setState","Contract","from","defaultAccount","render"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B,C,CACA;;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,IAAP,MAAiB,MAAjB,C,CACA;AACA;AACA;AACA;;AACA,IAAIC,KAAJ;;AACA,IAAIC,WAAW,GAAC,CAAC;AAAC,cAAW,KAAZ;AAAkB,YAAS,CAAC;AAAC,YAAO,MAAR;AAAe,YAAO;AAAtB,GAAD,EAAkC;AAAC,YAAO,QAAR;AAAiB,YAAO;AAAxB,GAAlC,EAAqE;AAAC,YAAO,UAAR;AAAmB,YAAO;AAA1B,GAArE,EAA0G;AAAC,YAAO,mBAAR;AAA4B,YAAO;AAAnC,GAA1G,EAAwJ;AAAC,YAAO,UAAR;AAAmB,YAAO;AAA1B,GAAxJ,CAA3B;AAAwN,UAAO,gBAA/N;AAAgP,aAAU,EAA1P;AAA6P,aAAU,KAAvQ;AAA6Q,qBAAkB,YAA/R;AAA4S,UAAO;AAAnT,CAAD,EAAgU;AAAC,cAAW,KAAZ;AAAkB,YAAS,EAA3B;AAA8B,UAAO,eAArC;AAAqD,aAAU,EAA/D;AAAkE,aAAU,IAA5E;AAAiF,qBAAkB,SAAnG;AAA6G,UAAO;AAApH,CAAhU,EAAgc;AAAC,YAAS,EAAV;AAAa,aAAU,KAAvB;AAA6B,qBAAkB,YAA/C;AAA4D,UAAO;AAAnE,CAAhc,EAAkhB;AAAC,eAAY,KAAb;AAAmB,YAAS,CAAC;AAAC,eAAU,KAAX;AAAiB,YAAO,MAAxB;AAA+B,YAAO;AAAtC,GAAD,EAAkD;AAAC,eAAU,KAAX;AAAiB,YAAO,UAAxB;AAAmC,YAAO;AAA1C,GAAlD,EAAuG;AAAC,eAAU,KAAX;AAAiB,YAAO,QAAxB;AAAiC,YAAO;AAAxC,GAAvG,EAA0J;AAAC,eAAU,KAAX;AAAiB,YAAO,oBAAxB;AAA6C,YAAO;AAApD,GAA1J,EAAyN;AAAC,eAAU,KAAX;AAAiB,YAAO,mBAAxB;AAA4C,YAAO;AAAnD,GAAzN,EAAuR;AAAC,eAAU,KAAX;AAAiB,YAAO,UAAxB;AAAmC,YAAO;AAA1C,GAAvR,CAA5B;AAAwW,UAAO,iBAA/W;AAAiY,UAAO;AAAxY,CAAlhB,EAAm6B;AAAC,cAAW,IAAZ;AAAiB,YAAS,CAAC;AAAC,YAAO,EAAR;AAAW,YAAO;AAAlB,GAAD,CAA1B;AAAyD,UAAO,UAAhE;AAA2E,aAAU,CAAC;AAAC,YAAO,EAAR;AAAW,YAAO;AAAlB,GAAD,CAArF;AAAoH,aAAU,KAA9H;AAAoI,qBAAkB,MAAtJ;AAA6J,UAAO;AAApK,CAAn6B,EAAmlC;AAAC,cAAW,IAAZ;AAAiB,YAAS,EAA1B;AAA6B,UAAO,GAApC;AAAwC,aAAU,CAAC;AAAC,YAAO,EAAR;AAAW,YAAO;AAAlB,GAAD,CAAlD;AAAgF,aAAU,KAA1F;AAAgG,qBAAkB,MAAlH;AAAyH,UAAO;AAAhI,CAAnlC,EAA+tC;AAAC,cAAW,IAAZ;AAAiB,YAAS,EAA1B;AAA6B,UAAO,sBAApC;AAA2D,aAAU,CAAC;AAAC,YAAO,EAAR;AAAW,YAAO;AAAlB,GAAD,CAArE;AAAoG,aAAU,KAA9G;AAAoH,qBAAkB,MAAtI;AAA6I,UAAO;AAApJ,CAA/tC,CAAhB;AACA,IAAIC,QAAQ,GAAC,CAAC;AAAC,cAAW,KAAZ;AAAkB,YAAS,EAA3B;AAA8B,UAAO,YAArC;AAAkD,aAAU,EAA5D;AAA+D,aAAU,KAAzE;AAA+E,qBAAkB,YAAjG;AAA8G,UAAO;AAArH,CAAD,EAAkI;AAAC,cAAW,KAAZ;AAAkB,YAAS,EAA3B;AAA8B,UAAO,eAArC;AAAqD,aAAU,EAA/D;AAAkE,aAAU,KAA5E;AAAkF,qBAAkB,YAApG;AAAiH,UAAO;AAAxH,CAAlI,EAAsQ;AAAC,cAAW,KAAZ;AAAkB,YAAS,EAA3B;AAA8B,UAAO,gBAArC;AAAsD,aAAU,EAAhE;AAAmE,aAAU,IAA7E;AAAkF,qBAAkB,SAApG;AAA8G,UAAO;AAArH,CAAtQ,EAAuY;AAAC,cAAW,KAAZ;AAAkB,YAAS,CAAC;AAAC,YAAO,OAAR;AAAgB,YAAO;AAAvB,GAAD,EAAmC;AAAC,YAAO,QAAR;AAAiB,YAAO;AAAxB,GAAnC,CAA3B;AAAkG,UAAO,aAAzG;AAAuH,aAAU,EAAjI;AAAoI,aAAU,KAA9I;AAAoJ,qBAAkB,YAAtK;AAAmL,UAAO;AAA1L,CAAvY,EAA6kB;AAAC,cAAW,KAAZ;AAAkB,YAAS,EAA3B;AAA8B,UAAO,aAArC;AAAmD,aAAU,EAA7D;AAAgE,aAAU,KAA1E;AAAgF,qBAAkB,YAAlG;AAA+G,UAAO;AAAtH,CAA7kB,EAA+sB;AAAC,cAAW,IAAZ;AAAiB,YAAS,EAA1B;AAA6B,UAAO,sBAApC;AAA2D,aAAU,CAAC;AAAC,YAAO,EAAR;AAAW,YAAO;AAAlB,GAAD,CAArE;AAAoG,aAAU,KAA9G;AAAoH,qBAAkB,MAAtI;AAA6I,UAAO;AAApJ,CAA/sB,EAA+2B;AAAC,cAAW,KAAZ;AAAkB,YAAS,EAA3B;AAA8B,UAAO,UAArC;AAAgD,aAAU,EAA1D;AAA6D,aAAU,KAAvE;AAA6E,qBAAkB,YAA/F;AAA4G,UAAO;AAAnH,CAA/2B,EAA8+B;AAAC,cAAW,IAAZ;AAAiB,YAAS,EAA1B;AAA6B,UAAO,YAApC;AAAiD,aAAU,CAAC;AAAC,kBAAa,CAAC;AAAC,cAAO,OAAR;AAAgB,cAAO;AAAvB,KAAD,EAAgC;AAAC,cAAO,WAAR;AAAoB,cAAO;AAA3B,KAAhC,EAAmE;AAAC,cAAO,aAAR;AAAsB,cAAO;AAA7B,KAAnE,EAAwG;AAAC,cAAO,MAAR;AAAe,cAAO;AAAtB,KAAxG,EAAsI;AAAC,cAAO,WAAR;AAAoB,cAAO;AAA3B,KAAtI,EAAyK;AAAC,cAAO,eAAR;AAAwB,cAAO;AAA/B,KAAzK,CAAd;AAA+N,YAAO,EAAtO;AAAyO,YAAO;AAAhP,GAAD,CAA3D;AAAsT,aAAU,KAAhU;AAAsU,qBAAkB,MAAxV;AAA+V,UAAO;AAAtW,CAA9+B,EAAg2C;AAAC,cAAW,IAAZ;AAAiB,YAAS,EAA1B;AAA6B,UAAO,0BAApC;AAA+D,aAAU,CAAC;AAAC,YAAO,EAAR;AAAW,YAAO;AAAlB,GAAD,CAAzE;AAAwG,aAAU,KAAlH;AAAwH,qBAAkB,MAA1I;AAAiJ,UAAO;AAAxJ,CAAh2C,EAAogD;AAAC,cAAW,IAAZ;AAAiB,YAAS,EAA1B;AAA6B,UAAO,aAApC;AAAkD,aAAU,CAAC;AAAC,kBAAa,CAAC;AAAC,cAAO,UAAR;AAAmB,cAAO;AAA1B,KAAD,EAAsC;AAAC,cAAO,QAAR;AAAiB,cAAO;AAAxB,KAAtC,EAAyE;AAAC,cAAO,UAAR;AAAmB,cAAO;AAA1B,KAAzE,EAA6G;AAAC,cAAO,aAAR;AAAsB,cAAO;AAA7B,KAA7G,EAAoJ;AAAC,cAAO,MAAR;AAAe,cAAO;AAAtB,KAApJ,EAAqL;AAAC,cAAO,iBAAR;AAA0B,cAAO;AAAjC,KAArL,EAAiO;AAAC,cAAO,mBAAR;AAA4B,cAAO;AAAnC,KAAjO,EAA+Q;AAAC,cAAO,sBAAR;AAA+B,cAAO;AAAtC,KAA/Q,EAAgU;AAAC,cAAO,0BAAR;AAAmC,cAAO;AAA1C,KAAhU,CAAd;AAAoY,YAAO,EAA3Y;AAA8Y,YAAO;AAArZ,GAAD,CAA5D;AAA4d,aAAU,KAAte;AAA4e,qBAAkB,MAA9f;AAAqgB,UAAO;AAA5gB,CAApgD,EAA4hE;AAAC,cAAW,KAAZ;AAAkB,YAAS,CAAC;AAAC,YAAO,MAAR;AAAe,YAAO;AAAtB,GAAD,EAAkC;AAAC,YAAO,SAAR;AAAkB,YAAO;AAAzB,GAAlC,CAA3B;AAA+F,UAAO,aAAtG;AAAoH,aAAU,EAA9H;AAAiI,aAAU,IAA3I;AAAgJ,qBAAkB,SAAlK;AAA4K,UAAO;AAAnL,CAA5hE,EAA2tE;AAAC,cAAW,KAAZ;AAAkB,YAAS,CAAC;AAAC,YAAO,MAAR;AAAe,YAAO;AAAtB,GAAD,EAAkC;AAAC,YAAO,QAAR;AAAiB,YAAO;AAAxB,GAAlC,CAA3B;AAAiG,UAAO,UAAxG;AAAmH,aAAU,EAA7H;AAAgI,aAAU,KAA1I;AAAgJ,qBAAkB,YAAlK;AAA+K,UAAO;AAAtL,CAA3tE,EAA65E;AAAC,cAAW,KAAZ;AAAkB,YAAS,CAAC;AAAC,YAAO,kBAAR;AAA2B,YAAO;AAAlC,GAAD,EAA8C;AAAC,YAAO,sBAAR;AAA+B,YAAO;AAAtC,GAA9C,CAA3B;AAA2H,UAAO,uBAAlI;AAA0J,aAAU,EAApK;AAAuK,aAAU,KAAjL;AAAuL,qBAAkB,YAAzM;AAAsN,UAAO;AAA7N,CAA75E,EAAsoF;AAAC,YAAS,CAAC;AAAC,YAAO,MAAR;AAAe,YAAO;AAAtB,GAAD,EAAkC;AAAC,YAAO,QAAR;AAAiB,YAAO;AAAxB,GAAlC,EAAqE;AAAC,YAAO,UAAR;AAAmB,YAAO;AAA1B,GAArE,EAA0G;AAAC,YAAO,mBAAR;AAA4B,YAAO;AAAnC,GAA1G,EAAwJ;AAAC,YAAO,UAAR;AAAmB,YAAO;AAA1B,GAAxJ,CAAV;AAAuM,aAAU,KAAjN;AAAuN,qBAAkB,YAAzO;AAAsP,UAAO;AAA7P,CAAtoF,EAAk5F;AAAC,eAAY,KAAb;AAAmB,YAAS,CAAC;AAAC,eAAU,KAAX;AAAiB,YAAO,MAAxB;AAA+B,YAAO;AAAtC,GAAD,EAAkD;AAAC,eAAU,KAAX;AAAiB,YAAO,UAAxB;AAAmC,YAAO;AAA1C,GAAlD,EAAuG;AAAC,eAAU,KAAX;AAAiB,YAAO,QAAxB;AAAiC,YAAO;AAAxC,GAAvG,EAA0J;AAAC,eAAU,KAAX;AAAiB,YAAO,iBAAxB;AAA0C,YAAO;AAAjD,GAA1J,CAA5B;AAAmP,UAAO,eAA1P;AAA0Q,UAAO;AAAjR,CAAl5F,EAA4qG;AAAC,eAAY,KAAb;AAAmB,YAAS,CAAC;AAAC,eAAU,KAAX;AAAiB,YAAO,OAAxB;AAAgC,YAAO;AAAvC,GAAD,EAAmD;AAAC,eAAU,KAAX;AAAiB,YAAO,QAAxB;AAAiC,YAAO;AAAxC,GAAnD,EAAsG;AAAC,eAAU,KAAX;AAAiB,YAAO,UAAxB;AAAmC,YAAO;AAA1C,GAAtG,EAA2J;AAAC,eAAU,KAAX;AAAiB,YAAO,WAAxB;AAAoC,YAAO;AAA3C,GAA3J,EAA8M;AAAC,eAAU,KAAX;AAAiB,YAAO,aAAxB;AAAsC,YAAO;AAA7C,GAA9M,CAA5B;AAAgS,UAAO,wBAAvS;AAAgU,UAAO;AAAvU,CAA5qG,EAA4/G;AAAC,eAAY,KAAb;AAAmB,YAAS,CAAC;AAAC,eAAU,KAAX;AAAiB,YAAO,UAAxB;AAAmC,YAAO;AAA1C,GAAD,EAAsD;AAAC,eAAU,KAAX;AAAiB,YAAO,QAAxB;AAAiC,YAAO;AAAxC,GAAtD,EAAyG;AAAC,eAAU,KAAX;AAAiB,YAAO,MAAxB;AAA+B,YAAO;AAAtC,GAAzG,CAA5B;AAAoL,UAAO,iBAA3L;AAA6M,UAAO;AAApN,CAA5/G,EAAytH;AAAC,eAAY,KAAb;AAAmB,YAAS,CAAC;AAAC,eAAU,KAAX;AAAiB,YAAO,UAAxB;AAAmC,YAAO;AAA1C,GAAD,EAAsD;AAAC,eAAU,KAAX;AAAiB,YAAO,QAAxB;AAAiC,YAAO;AAAxC,GAAtD,EAAyG;AAAC,eAAU,KAAX;AAAiB,YAAO,WAAxB;AAAoC,YAAO;AAA3C,GAAzG,CAA5B;AAAyL,UAAO,oBAAhM;AAAqN,UAAO;AAA5N,CAAztH,EAA87H;AAAC,eAAY,KAAb;AAAmB,YAAS,CAAC;AAAC,eAAU,KAAX;AAAiB,YAAO,UAAxB;AAAmC,YAAO;AAA1C,GAAD,EAAsD;AAAC,eAAU,KAAX;AAAiB,YAAO,QAAxB;AAAiC,YAAO;AAAxC,GAAtD,EAAyG;AAAC,eAAU,KAAX;AAAiB,YAAO,OAAxB;AAAgC,YAAO;AAAvC,GAAzG,CAA5B;AAAwL,UAAO,oBAA/L;AAAoN,UAAO;AAA3N,CAA97H,EAAkqI;AAAC,eAAY,KAAb;AAAmB,YAAS,EAA5B;AAA+B,UAAO,4BAAtC;AAAmE,UAAO;AAA1E,CAAlqI,CAAb;AAEA,IAAIC,eAAe,GAACC,SAApB;AAAA,IAA8BC,YAAY,GAACD,SAA3C,C,CAGE;AACA;AACA;AACA;;AACF,MAAME,GAAN,SAAkBV,SAAlB,CAA2B;AACzBW,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAY;AACVC,MAAAA,WAAW,EAACN,SADF;AAEVO,MAAAA,EAAE,EAAGP;AAFK,KAAZ;AAIF,SAAKQ,YAAL,GAAkB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAlB;AAEC;;AAEAC,EAAAA,kBAAkB,GAAE;AACnB,QAAI,OAAOC,MAAM,CAACC,IAAd,KAAuB,WAA3B,EAAwC;AAChChB,MAAAA,KAAK,GAAG,IAAID,IAAJ,CAASgB,MAAM,CAACC,IAAP,CAAYC,eAArB,CAAR;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;;AACAnB,MAAAA,KAAK,CAACoB,GAAN,CAAUC,WAAV,GAAwBC,IAAxB,CAA6BC,CAAC,IAAE;AAC9B,aAAKC,QAAL,CAAc;AACZd,UAAAA,WAAW,EAACa,CAAC,CAAC,CAAD;AADD,SAAd;AAGH,OAJC,EAHgC,CAQ1B;AACE;AACA;AACA;AACA;AAEA;;;AACApB,MAAAA,eAAe,GAAC,IAAIH,KAAK,CAACoB,GAAN,CAAUK,QAAd,CAAuBxB,WAAvB,EAAoC,4CAApC,EAAkF;AAACyB,QAAAA,IAAI,EAAC1B,KAAK,CAACoB,GAAN,CAAUO;AAAhB,OAAlF,CAAhB;AAEP,KAjBT,MAmBUT,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACX;;AACDP,EAAAA,YAAY,CAAED,EAAF,EAAK;AACTO,IAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAiBR,EAAjB;AACC,SAAKa,QAAL,CAAc;AACTb,MAAAA,EAAE,EAACA;AADM,KAAd;AAIAN,IAAAA,YAAY,GAAG,IAAIL,KAAK,CAACoB,GAAN,CAAUK,QAAd,CAAuBvB,QAAvB,EAAiCS,EAAjC,EAAqC;AAACe,MAAAA,IAAI,EAAC1B,KAAK,CAACoB,GAAN,CAAUO;AAAhB,KAArC,CAAf;AACR;;AACDC,EAAAA,MAAM,GAAE;AAEN,QAAGzB,eAAe,KAAGC,SAAlB,IAA+B,KAAKK,KAAL,CAAWE,EAAX,IAAeP,SAAjD,EACI;AAACc,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqB,KAAKV,KAAL,CAAWC,WAAhC;AACG,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AAAa,QAAA,eAAe,EAAEP,eAA9B;AAA+C,QAAA,WAAW,EAAE,KAAKM,KAAL,CAAWC,WAAvE;AAAqF,QAAA,YAAY,EAAE,KAAKE,YAAxG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAMP,KARD,MASK,IAAG,KAAKH,KAAL,CAAWC,WAAX,IAA0B,KAAKD,KAAL,CAAWE,EAArC,IAA2CN,YAA9C,EAA2D;AAC9D,aAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK,oBAAC,IAAD;AAAO,QAAA,YAAY,EAAEA,YAArB;AAAoC,QAAA,WAAW,EAAE,KAAKI,KAAL,CAAWC,WAA5D;AAAyE,QAAA,EAAE,EAAE,KAAKD,KAAL,CAAWE,EAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAL,CAAR;AACD,KAFI,MAIJ,OAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK;AAAG,MAAA,IAAI,EAAC,sBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAAL,MAAT;AAIF;;AA5DwB;;AAiE3B,eAAeL,GAAf","sourcesContent":["import React, {Component} from 'react';\r\n// import Main from './Main';\r\nimport Transaction from './Transaction';\r\nimport Main from './Main';\r\nimport Web3 from 'web3'\r\n//100000000,\"Piggy\",4,\"PGY\"\r\n// ropsten token addres  0xaf13a1579a45c0b3888efd6c59161dc17ffefb06\r\n// factory contrat : 0xfd47fa890cff28a4ad101cb67a21745ee19afcd8\r\n// import { convertPatternsToTasks } from 'fast-glob/out/managers/tasks';\r\nlet _web3;\r\nvar factory_abi=[{\"constant\":false,\"inputs\":[{\"name\":\"Vold\",\"type\":\"uint256\"},{\"name\":\"sender\",\"type\":\"address\"},{\"name\":\"receiver\",\"type\":\"address\"},{\"name\":\"realrequiredPrice\",\"type\":\"uint256\"},{\"name\":\"category\",\"type\":\"string\"}],\"name\":\"createContract\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"requestTokens\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"Vold\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"receiver\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"newContractAddress\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"realrequiredPrice\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"category\",\"type\":\"string\"}],\"name\":\"contractCreated\",\"type\":\"event\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"allDeals\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"b\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tokenContractAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]\r\nvar deal_abi=[{\"constant\":false,\"inputs\":[],\"name\":\"unlockDeal\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"unsatisfyDeal\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"refundSecurity\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"Volds\",\"type\":\"uint256\"},{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"addSecurity\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"satisfyDeal\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tokenContractAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"lockDeal\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"showStatus\",\"outputs\":[{\"components\":[{\"name\":\"exist\",\"type\":\"bool\"},{\"name\":\"secSender\",\"type\":\"bool\"},{\"name\":\"secReceiver\",\"type\":\"bool\"},{\"name\":\"lock\",\"type\":\"bool\"},{\"name\":\"satisfied\",\"type\":\"bool\"},{\"name\":\"rewardClaimed\",\"type\":\"bool\"}],\"name\":\"\",\"type\":\"tuple\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"PiggyBankContractAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"showDetails\",\"outputs\":[{\"components\":[{\"name\":\"receiver\",\"type\":\"address\"},{\"name\":\"sender\",\"type\":\"address\"},{\"name\":\"category\",\"type\":\"string\"},{\"name\":\"description\",\"type\":\"string\"},{\"name\":\"Vold\",\"type\":\"uint256\"},{\"name\":\"curBalanceToken\",\"type\":\"uint256\"},{\"name\":\"realrequiredPrice\",\"type\":\"uint256\"},{\"name\":\"securityDepositToken\",\"type\":\"uint256\"},{\"name\":\"realsecurityDepositPrice\",\"type\":\"uint256\"}],\"name\":\"\",\"type\":\"tuple\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"Vnew\",\"type\":\"uint256\"},{\"name\":\"useBank\",\"type\":\"bool\"}],\"name\":\"claimReward\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"Vold\",\"type\":\"uint256\"},{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"addmoney\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newRequiredToken\",\"type\":\"uint256\"},{\"name\":\"newrealrequiredPrice\",\"type\":\"uint256\"}],\"name\":\"updaterequiredBalance\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"Vold\",\"type\":\"uint256\"},{\"name\":\"sender\",\"type\":\"address\"},{\"name\":\"receiver\",\"type\":\"address\"},{\"name\":\"realrequiredPrice\",\"type\":\"uint256\"},{\"name\":\"category\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"Vold\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"receiver\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"curBalanceToken\",\"type\":\"uint256\"}],\"name\":\"eventaddmoney\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"Volds\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"receiver\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"secSender\",\"type\":\"bool\"},{\"indexed\":false,\"name\":\"secReceiver\",\"type\":\"bool\"}],\"name\":\"eventSecurityDeposited\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"receiver\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"lock\",\"type\":\"bool\"}],\"name\":\"eventDealLocked\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"receiver\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"satisfied\",\"type\":\"bool\"}],\"name\":\"eventDealSatisfied\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"receiver\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"toGet\",\"type\":\"uint256\"}],\"name\":\"eventRewardClaimed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"eventupdaterequiredBalance\",\"type\":\"event\"}]\r\n\r\nvar factoryContract=undefined,dealContract=undefined;\r\n\r\n   \r\n  //  else {\r\n  //     console.log('No web3? You should consider trying MetaMask!');\r\n  //     var web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:8545'));\r\n  // }\r\nclass App extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state= {\r\n      thisAccount:undefined,\r\n      ca : undefined\r\n    }\r\n  this.loadContract=this.loadContract.bind(this)\r\n    \r\n  }\r\n\r\n   componentWillMount(){\r\n    if (typeof window.web3 !== 'undefined') {\r\n            _web3 = new Web3(window.web3.currentProvider);\r\n            console.log('adx');\r\n            _web3.eth.getAccounts().then(e=>{\r\n              this.setState({\r\n                thisAccount:e[0]\r\n              })\r\n          });\r\n                  // run the following code only once. Metamask will ask for permission. allow it. then you can comment following code for subsequent ...\r\n                    // window.ethereum.enable().then((account) =>{\r\n                    //     const defaultAccount = account[0]\r\n                    //     _web3.eth.defaultAccount = defaultAccount\r\n                    //     console.log(defaultAccount);\r\n                    \r\n                    // })\r\n                    factoryContract=new _web3.eth.Contract(factory_abi, '0x603cdc36d6e16696099a72162724ff38419afb57', {from:_web3.eth.defaultAccount})   ;\r\n                \r\n            }\r\n            else \r\n              console.log('Unable to connect to metamask');\r\n  }\r\n  loadContract( ca){\r\n          console.log('la',ca)\r\n           this.setState({\r\n                ca:ca\r\n           });\r\n\r\n           dealContract=  new _web3.eth.Contract(deal_abi, ca, {from:_web3.eth.defaultAccount})   ;\r\n  }\r\n  render(){\r\n    \r\n    if(factoryContract!==undefined && this.state.ca==undefined)\r\n        {console.log('int ca',this.state.thisAccount);\r\n            return(\r\n              <div>\r\n                <Transaction factoryContract={factoryContract} thisAccount={this.state.thisAccount}  search_by_ca={this.loadContract}/>\r\n                {/* <Main/> */}\r\n              </div>\r\n            );\r\n    }\r\n    else if(this.state.thisAccount && this.state.ca && dealContract){\r\n      return (<div><Main  dealContract={dealContract}  thisAccount={this.state.thisAccount} ca={this.state.ca}  /></div>)\r\n    }\r\n    else\r\n     return ( <div><a href=\"https://metamask.io/\">Please install metamask first !</a> </div>)\r\n    \r\n    \r\n   \r\n  }\r\n \r\n\r\n  \r\n}\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}